!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Planck={})}(this,function(t){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=Symbol(t);return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return void 0===t[e]&&(t[e]=n({})),t[e]}}function n(t){this.message=t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&o(t.slice(0,0))}function a(t){this.message=t}function u(t){var e=Bt(t);return{set target(t){e.target=t||null},set currentTarget(t){e.currentTarget=t||null},set phase(t){e.phase=t||null}}}function s(t,e){return e.object===t.object&&e.name===t.name}function c(t,e){var n=It(this);if(e.target===n.source&&e.name===n.name){var r=t(e.value);n.targets.forEach(function(t){t.object[t.name]=r})}}function f(t){var e=It(t),n=Mt.type(e.name);e.source.removeEventListener(n,e.handleChange,!1)}function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce(function(t,e){return t.concat(e)},[]),o=void 0,i=r.reduce(function(t,e,n){return n%2==0?o=e:t.push({object:o,name:e}),t},[]);return[i,Object.assign({oneWay:i.length>1},r[2*i.length])]}function h(t,e,n,r){var o=Ft(t);void 0===o.bindings&&(o.bindings={}),void 0===o.bindings[e]&&(o.bindings[e]=[]);var i=o.bindings[e];i.forEach(function(t){t.unbind(n)}),(i=i.filter(function(t){return!t.empty})).push(new Rt(t,e,n,r)),o.bindings[e]=i}function p(t,e,n){var r=Ft(t);if(void 0===r.bindings)return[];if(void 0===r.bindings[e])return[];var o=r.bindings[e],i=o.reduce(function(t,e){return t.concat(e.unbind(n))},[]);return o=o.filter(function(t){return!t.empty}),r.bindings[e]=o,i}function y(t,e){var n=Ft(t);if(void 0===n.bindings)return[];if(void 0===n.bindings[e])return[];var r=n.bindings[e].reduce(function(t,e){return t.concat(e.unbindAll())},[]);return n.bindings[e]=[],r}function d(t,e){if("function"==typeof e)e(t);else{if("function"!=typeof e.handleEvent)throw new Error("Listener is neither function nor event listener");e.handleEvent(t)}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=Symbol(t);return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return void 0===t[e]&&(t[e]=n({})),t[e]}}function g(t){this.message=t}function m(t,e){return e={exports:{}},t(e,e.exports),e.exports}function b(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function w(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&b(t.slice(0,0))}function k(t){this.message=t}function E(t){return decodeURIComponent(t.replace(/\+/g," "))}function _(t){var e,n={},r=void 0===(t=t||ue.location||{})?"undefined":V(t);if("blob:"===t.protocol)n=new j(unescape(t.pathname),{});else if("string"===r){n=new j(t,{});for(e in xe)delete n[e]}else if("object"===r){for(e in t)e in xe||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=je.test(t.href))}return n}function O(t){var e=Ae.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function A(t,e){for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}function j(t,e,n){if(!(this instanceof j))return new j(t,e,n);var r,o,i,a,u,s,c=Te.slice(),f=void 0===e?"undefined":V(e),l=this,h=0;for("object"!==f&&"string"!==f&&(n=e,e=null),n&&"function"!=typeof n&&(n=Oe.parse),e=_(e),r=!(o=O(t||"")).protocol&&!o.slashes,l.slashes=o.slashes||r&&e.slashes,l.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(c[2]=[/(.*)/,"pathname"]);h<c.length;h++)i=(a=c[h])[0],s=a[1],i!==i?l[s]=t:"string"==typeof i?~(u=t.indexOf(i))&&("number"==typeof a[2]?(l[s]=t.slice(0,u),t=t.slice(u+a[2])):(l[s]=t.slice(u),t=t.slice(0,u))):(u=i.exec(t))&&(l[s]=u[1],t=t.slice(0,u.index)),l[s]=l[s]||(r&&a[3]?e[s]||"":""),a[4]&&(l[s]=l[s].toLowerCase());n&&(l.query=n(l.query)),r&&e.slashes&&"/"!==l.pathname.charAt(0)&&(""!==l.pathname||""!==e.pathname)&&(l.pathname=A(l.pathname,e.pathname)),Ee(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(a=l.auth.split(":"),l.username=a[0]||"",l.password=a[1]||""),l.origin=l.protocol&&l.host&&"file:"!==l.protocol?l.protocol+"//"+l.host:"null",l.href=l.toString()}function T(t,e){return new Promise(function(n,r){var o=new Se(t,!0);e.query&&o.set("query",Object.assign({},o.query,e.query));var i=new XMLHttpRequest;i.open("get",o.toString(),!0),e.headers&&Object.entries(e.headers).forEach(function(t){i.setRequestHeader.apply(i,nt(t))}),i.responseType=e.type,i.addEventListener("loadend",function(t){i.status<200||i.status>=300?r(i.status):null!==i.response||"json"!==e.type?n(i.response):r(new Error("Could not parse JSON"))},!1),i.send()})}function x(t,e){return e.local?new Promise(function(n,r){Be(t,e.encoding,function(t,e){t?r(t):n(e)})}):new Promise(function(n,r){qe({url:t,headers:e.headers||{},qs:e.query||{},encoding:e.encoding},function(t,e){t?r(t):((e.statusCode<200||e.statusCode>=300)&&r(e.statusCode),n(e.body))})})}function P(t,e){if("node"===ee.type){var n=x(t,e);return"json"===e.type?n.then(function(t){if("string"!=typeof t)throw new Error("Response is unexpectedly not a string");return JSON.parse(t)}):"arraybuffer"===e.type?n.then(function(t){if(!(t instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r<t.length;++r)n[r]=t[r];return e}):n}return T(t,e)}function S(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1];if("string"!=typeof r&&(r=(o=r).url),"string"!=typeof r)throw new Error("The first argument or options.url must be a string");return o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o),[r,o]}function B(t){var e=Ye(this),n=t.target;n.removeEventListener("progress",e.handlers.init,!1),200===n.status&&(0===e.size&&L(this,t.total),0!==e.size&&K(this,!0))}function q(t){var e=Ye(this);e.determinate&&z(this,Math.min(1,t.loaded/e.size))}function C(t){var e=Ye(this),n=t.target;n.removeEventListener("progress",e.handlers.progress,!1),n.removeEventListener("loadend",e.handlers.loadend,!1),e.determinate||K(this,!0),200===n.status?(z(this,1),e.resolve(n),M(this,!0)):(e.reject(n.status),I(this,!0))}function L(t,e){var n=Ye(t);e!==n.size&&(n.size=e,t.dispatchEvent({type:"size",target:t}))}function z(t,e){var n=Ye(t);e!==n.progress&&(n.progress=e,t.dispatchEvent({type:"progress",target:t}))}function K(t,e){var n=Ye(t);e!==n.determinate&&(n.determinate=e,t.dispatchEvent({type:"determinate",target:t}))}function M(t,e){var n=Ye(t);e!==n.completed&&(n.completed=e,t.dispatchEvent({type:"completed",target:t}))}function I(t,e){var n=Ye(t);e!==n.failed&&(n.failed=e,t.dispatchEvent({type:"failed",target:t}))}function R(t){return t.map(function(t){return Array.isArray(t)?R(t):t&&"function"==typeof t.load?t:(t.url||t).endsWith(".js")?new Je(t):new Ze(t)})}function F(t){return t.reduce(function(t,e){return Array.isArray(e)?t.concat(F(e)):(t.push(e),t)},[])}function D(t){this.dispatchEvent({type:"size",target:this})}function U(t){this.dispatchEvent({type:"progress",target:this})}function N(t){H(this)}function X(t){Y(this)}function W(t){Z(this)}function H(t){var e=Ge(t),n=e.loaders.every(function(t){return t.determinate});n!==e.determinate&&(e.determinate=n,t.dispatchEvent({type:"determinate",target:t}))}function Y(t){var e=Ge(t),n=e.loaders.every(function(t){return t.completed});n!==e.completed&&(e.completed=n,t.dispatchEvent({type:"completed",target:t}))}function Z(t){var e=Ge(t),n=e.loaders.some(function(t){return t.failed});n!==e.failed&&(e.failed=n,t.dispatchEvent({type:"failed",target:t}),e.failed&&t.abort())}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},G=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Q=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},$=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},tt=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},et=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),nt=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};Object.setPrototypeOf(n,Error),(n.prototype=Object.create(Error.prototype)).name="AssertionError",n.prototype.message="",n.prototype.constructor=n;var rt=function(){function t(){J(this,t)}return G(t,null,[{key:"type",get:function(){try{if(new Function("return this === window")())return"browser"}catch(t){}try{if(new Function("return this === self")())return"worker"}catch(t){}try{if(new Function("return this === global")())return"node"}catch(t){}throw new Error}},{key:"self",get:function(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),t}(),ot=e("FilePath"),it=function(){function t(){J(this,t)}return G(t,null,[{key:"self",get:function(){return ot(this).self}},{key:"current",get:function(){switch(rt.type){case"browser":return window.location.href;case"worker":return self.location.href;case"node":return process.cwd()}throw new Error}}]),t}();ot(it).self=it.current;var at,ut,st,ct="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ft=r(function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}};t.exports=n}()}),lt={utf8:{stringToBytes:function(t){return lt.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(lt.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},ht=lt,pt=function(t){return null!=t&&(o(t)||i(t)||!!t._isBuffer)},yt=(r(function(t){!function(){var e=ft,n=ht.utf8,r=pt,o=ht.bin,i=function t(i,a){i.constructor==String?i=a&&"binary"===a.encoding?o.stringToBytes(i):n.stringToBytes(i):r(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||(i=i.toString());for(var u=e.bytesToWords(i),s=8*i.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<u.length;p++)u[p]=16711935&(u[p]<<8|u[p]>>>24)|4278255360&(u[p]<<24|u[p]>>>8);u[s>>>5]|=128<<s%32,u[14+(s+64>>>9<<4)]=s;for(var y=t._ff,d=t._gg,v=t._hh,g=t._ii,p=0;p<u.length;p+=16){var m=c,b=f,w=l,k=h;f=g(f=g(f=g(f=g(f=v(f=v(f=v(f=v(f=d(f=d(f=d(f=d(f=y(f=y(f=y(f=y(f,l=y(l,h=y(h,c=y(c,f,l,h,u[p+0],7,-680876936),f,l,u[p+1],12,-389564586),c,f,u[p+2],17,606105819),h,c,u[p+3],22,-1044525330),l=y(l,h=y(h,c=y(c,f,l,h,u[p+4],7,-176418897),f,l,u[p+5],12,1200080426),c,f,u[p+6],17,-1473231341),h,c,u[p+7],22,-45705983),l=y(l,h=y(h,c=y(c,f,l,h,u[p+8],7,1770035416),f,l,u[p+9],12,-1958414417),c,f,u[p+10],17,-42063),h,c,u[p+11],22,-1990404162),l=y(l,h=y(h,c=y(c,f,l,h,u[p+12],7,1804603682),f,l,u[p+13],12,-40341101),c,f,u[p+14],17,-1502002290),h,c,u[p+15],22,1236535329),l=d(l,h=d(h,c=d(c,f,l,h,u[p+1],5,-165796510),f,l,u[p+6],9,-1069501632),c,f,u[p+11],14,643717713),h,c,u[p+0],20,-373897302),l=d(l,h=d(h,c=d(c,f,l,h,u[p+5],5,-701558691),f,l,u[p+10],9,38016083),c,f,u[p+15],14,-660478335),h,c,u[p+4],20,-405537848),l=d(l,h=d(h,c=d(c,f,l,h,u[p+9],5,568446438),f,l,u[p+14],9,-1019803690),c,f,u[p+3],14,-187363961),h,c,u[p+8],20,1163531501),l=d(l,h=d(h,c=d(c,f,l,h,u[p+13],5,-1444681467),f,l,u[p+2],9,-51403784),c,f,u[p+7],14,1735328473),h,c,u[p+12],20,-1926607734),l=v(l,h=v(h,c=v(c,f,l,h,u[p+5],4,-378558),f,l,u[p+8],11,-2022574463),c,f,u[p+11],16,1839030562),h,c,u[p+14],23,-35309556),l=v(l,h=v(h,c=v(c,f,l,h,u[p+1],4,-1530992060),f,l,u[p+4],11,1272893353),c,f,u[p+7],16,-155497632),h,c,u[p+10],23,-1094730640),l=v(l,h=v(h,c=v(c,f,l,h,u[p+13],4,681279174),f,l,u[p+0],11,-358537222),c,f,u[p+3],16,-722521979),h,c,u[p+6],23,76029189),l=v(l,h=v(h,c=v(c,f,l,h,u[p+9],4,-640364487),f,l,u[p+12],11,-421815835),c,f,u[p+15],16,530742520),h,c,u[p+2],23,-995338651),l=g(l,h=g(h,c=g(c,f,l,h,u[p+0],6,-198630844),f,l,u[p+7],10,1126891415),c,f,u[p+14],15,-1416354905),h,c,u[p+5],21,-57434055),l=g(l,h=g(h,c=g(c,f,l,h,u[p+12],6,1700485571),f,l,u[p+3],10,-1894986606),c,f,u[p+10],15,-1051523),h,c,u[p+1],21,-2054922799),l=g(l,h=g(h,c=g(c,f,l,h,u[p+8],6,1873313359),f,l,u[p+15],10,-30611744),c,f,u[p+6],15,-1560198380),h,c,u[p+13],21,1309151649),l=g(l,h=g(h,c=g(c,f,l,h,u[p+4],6,-145523070),f,l,u[p+11],10,-1120210379),c,f,u[p+2],15,718787259),h,c,u[p+9],21,-343485551),c=c+m>>>0,f=f+b>>>0,l=l+w>>>0,h=h+k>>>0}return e.endian([c,f,l,h])};i._ff=function(t,e,n,r,o,i,a){var u=t+(e&n|~e&r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._gg=function(t,e,n,r,o,i,a){var u=t+(e&r|n&~r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._hh=function(t,e,n,r,o,i,a){var u=t+(e^n^r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._ii=function(t,e,n,r,o,i,a){var u=t+(n^(e|~r))+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._blocksize=16,i._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(i(t,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):e.bytesToHex(r)}}()}),{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"}),dt=function(t){throw{name:"SyntaxError",message:t,at:at,text:void 0}},vt=function(t){return t&&t!==ut&&dt("Expected '"+t+"' instead of '"+ut+"'"),ut=(void 0).charAt(at),at+=1,ut},gt=function(){var t,e="";for("-"===ut&&(e="-",vt("-"));ut>="0"&&ut<="9";)e+=ut,vt();if("."===ut)for(e+=".";vt()&&ut>="0"&&ut<="9";)e+=ut;if("e"===ut||"E"===ut)for(e+=ut,vt(),"-"!==ut&&"+"!==ut||(e+=ut,vt());ut>="0"&&ut<="9";)e+=ut,vt();if(t=+e,isFinite(t))return t;dt("Bad number")},mt=function(){var t,e,n,r="";if('"'===ut)for(;vt();){if('"'===ut)return vt(),r;if("\\"===ut)if(vt(),"u"===ut){for(n=0,e=0;e<4&&(t=parseInt(vt(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof yt[ut])break;r+=yt[ut]}else r+=ut}dt("Bad string")},bt=function(){for(;ut&&ut<=" ";)vt()},wt=function(){switch(ut){case"t":return vt("t"),vt("r"),vt("u"),vt("e"),!0;case"f":return vt("f"),vt("a"),vt("l"),vt("s"),vt("e"),!1;case"n":return vt("n"),vt("u"),vt("l"),vt("l"),null}dt("Unexpected '"+ut+"'")},kt=function(){var t=[];if("["===ut){if(vt("["),bt(),"]"===ut)return vt("]"),t;for(;ut;){if(t.push(st()),bt(),"]"===ut)return vt("]"),t;vt(","),bt()}}dt("Bad array")},Et=function(){var t,e={};if("{"===ut){if(vt("{"),bt(),"}"===ut)return vt("}"),e;for(;ut;){if(t=mt(),bt(),vt(":"),Object.hasOwnProperty.call(e,t)&&dt('Duplicate key "'+t+'"'),e[t]=st(),bt(),"}"===ut)return vt("}"),e;vt(","),bt()}}dt("Bad object")};st=function(){switch(bt(),ut){case"{":return Et();case"[":return kt();case'"':return mt();case"-":return gt();default:return ut>="0"&&ut<="9"?gt():wt()}},Object.setPrototypeOf(a,Error),(a.prototype=Object.create(Error.prototype)).name="ImplementationError",a.prototype.message="",a.prototype.constructor=a;"node"===rt.type&&(require("fs").readFile,require("request"));r(function(t,e){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,a,u=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--);var f=new ArrayBuffer(u),l=new Uint8Array(f);for(e=0;e<s;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],a=n[t.charCodeAt(e+3)],l[c++]=r<<2|o>>4,l[c++]=(15&o)<<4|i>>2,l[c++]=(3&i)<<6|63&a;return f}}()});if("node"===rt.type){var _t=require("text-encoding");void 0===rt.self.TextEncoder&&(rt.self.TextEncoder=_t.TextEncoder),void 0===rt.self.TextDecoder&&(rt.self.TextDecoder=_t.TextDecoder)}var Ot,At=ct.crypto||ct.msCrypto;if(At&&At.getRandomValues){var jt=new Uint8Array(16);Ot=function(){return At.getRandomValues(jt),jt}}if(!Ot){var Tt=new Array(16);Ot=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),Tt[e]=t>>>((3&e)<<3)&255;return Tt}}for(var xt=Ot,Pt=[],St=0;St<256;++St)Pt[St]=(St+256).toString(16).substr(1);xt();var Bt=e("Event"),qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};J(this,t),this.init(e)}return G(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.captures,r=void 0!==n&&n,o=t.bubbles,i=void 0===o||o,a=Bt(this);return a.type=e||null,a.captures=!!r,a.bubbles=!!i,a.timestamp=Date.now(),a.propagationStopped=!1,a.immediatePropagationStopped=!1,a.target=null,a.currentTarget=null,a.phase=null,this}},{key:"stopPropagation",value:function(){Bt(this).propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){var t=Bt(this);t.propagationStopped=!0,t.immediatePropagationStopped=!0}},{key:"type",get:function(){return Bt(this).type}},{key:"target",get:function(){return Bt(this).target}},{key:"currentTarget",get:function(){return Bt(this).currentTarget}},{key:"phase",get:function(){return Bt(this).phase}},{key:"captures",get:function(){return Bt(this).captures}},{key:"bubbles",get:function(){return Bt(this).bubbles}},{key:"timestamp",get:function(){return Bt(this).timestamp}},{key:"propagationStopped",get:function(){return Bt(this).propagationStopped}},{key:"immediatePropagationStopped",get:function(){return Bt(this).immediatePropagationStopped}}]),t}(),Ct=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lt=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},zt=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,qt),G(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=t.target,o=Lt(t,["type","target"]);return Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,Ct({type:n},o)),u(this).target=r||null,this}}]),e}(),Kt=e("StateEvent"),Mt=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,zt),G(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.value,o=Lt(t,["name","value"]);Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,Ct({},o,{type:e.type(n)}));var i=Kt(this);return i.name=n,i.value=r,this}},{key:"name",get:function(){return Kt(this).name}},{key:"value",get:function(){return Kt(this).value}}],[{key:"type",value:function(t){return"state:"+(null===t||void 0===t?"":t)}}]),e}(),It=e("Binder"),Rt=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.assigns,a=void 0!==i&&i,u=o.transform,s=void 0===u?function(t){return t}:u;J(this,t);var f=It(this);f.source=e,f.name=n,f.targets=[].concat(nt(r)),f.handleChange=c.bind(this,s);var l=Mt.type(n);f.source.addEventListener(l,f.handleChange,!1),a&&r.forEach(function(t){t.object[t.name]=s(e[n])})}return G(t,[{key:"matches",value:function(t){var e=It(this);return!(!Array.isArray(t)||0===t.length)&&t.every(function(t){return e.targets.some(function(e){return s(e,t)})})}},{key:"unbind",value:function(t){if(!t)return this.unbindAll();var e=It(this),n=t.reduce(function(t,n){var r=e.targets.findIndex(function(t){return s(n,t)});return-1!==r&&(e.targets.splice(r,1),t.push(n)),t},[]);return 0===e.targets.length&&f(this),n}},{key:"unbindAll",value:function(){var t=It(this),e=t.targets;return t.targets=[],f(this),e}},{key:"empty",get:function(){return 0===It(this).targets.length}}]),t}(),Ft=e("Binding"),Dt=(function(){function t(){J(this,t)}G(t,null,[{key:"bind",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=l.apply(void 0,r),a=et(i,2),u=a[0],s=a[1];s.oneWay||u.forEach(function(n){h(n.object,n.name,[{object:t,name:e}],{assigns:!1,transform:s.inverseTransform})}),h(t,e,u,{assigns:!0,transform:s.transform})}},{key:"unbind",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=l.apply(void 0,r),a=et(i,2),u=a[0],s=a[1],c=p(t,e,u);s.oneWay||c.forEach(function(n){p(n.object,n.name,[{object:t,name:e}])})}},{key:"unbindAll",value:function(t,e){y(t,e).forEach(function(t){y(t.object,t.name)})}}])}(),e("EventBundle")),Ut=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,qt),G(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.originalEvent,r=Lt(t,["originalEvent"]);return Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,Ct({},r)),Dt(this).originalEvent=n||null,this}},{key:"preventDefault",value:function(){var t=Dt(this);null!==t.originalEvent&&t.originalEvent.preventDefault()}},{key:"defaultPrevented",get:function(){var t=Dt(this);return null!==t.originalEvent&&t.originalEvent.defaultPrevented}},{key:"originalEvent",get:function(){return Dt(this).originalEvent}}]),e}(),Nt=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,zt),G(e,[{key:"init",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.type,o=n.target,i=n.captures,a=void 0!==i&&i,u=n.bubbles,s=void 0!==u&&u,c=Lt(n,["type","target","captures","bubbles"]);return Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,{type:r,target:o,captures:a,bubbles:s}),Object.entries(c).forEach(function(e){var n=et(e,2),r=n[0],o=n[1];if({}.hasOwnProperty.call(t,r))throw new Error('Name "'+r+'" cannot be used for event property');t[r]=o}),this}}]),e}(),Xt=e("EventDispatcher"),Wt=function(){function t(){J(this,t),Xt(this).listeners={}}return G(t,[{key:"addEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof e&&"object"!==(void 0===e?"undefined":V(e)))throw new Error("Attempt to add non-function non-object listener");var r=Xt(this);void 0===r.listeners[t]&&(r.listeners[t]={bubble:[],capture:[]});var o=n?r.listeners[t].capture:r.listeners[t].bubble;o.includes(e)||o.push(e)}},{key:"removeEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Xt(this);if(void 0!==r.listeners[t]){var o=n?r.listeners[t].capture:r.listeners[t].bubble,i=o.indexOf(e);-1!==i&&o.splice(i,1)}}},{key:"on",value:function(){return this.addEventListener.apply(this,arguments),this}},{key:"off",value:function(){return this.removeEventListener.apply(this,arguments),this}},{key:"once",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=this;return this.addEventListener.apply(this,[t,function n(o){d(o,e),i.removeEventListener.apply(i,[t,n].concat(r))}].concat(r)),this}},{key:"dispatchEvent",value:function(t){var e=t;e instanceof qt||(e=new Nt(t));var n=u(e);e.target||(n.target=this),n.currentTarget=this;var r=Xt(this).listeners[e.type];if(void 0!==r){var o=e.phase;o&&"target"!==o&&"capture"!==o||[].concat(nt(r.capture)).some(function(t){return d(e,t),e.immediatePropagationStopped}),e.immediatePropagationStopped||o&&"target"!==o&&"bubble"!==o||[].concat(nt(r.bubble)).some(function(t){return d(e,t),e.immediatePropagationStopped})}}}]),t}(),Ht=e("EventTarget"),Yt=(function(t){function e(){J(this,e);var t=tt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Ht(t);return n.ancestorEventTarget=null,n.descendantEventTarget=null,t}$(e,Wt),G(e,[{key:"determinePropagationPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[];if(null!==t&&void 0!==t)for(var n=t;null!==n&&void 0!==n&&(e.unshift(n),n=n.ancestorEventTarget,!e.includes(n)););else for(var r=this;null!==r&&void 0!==r&&(e.push(r),r=r.descendantEventTarget,!e.includes(r)););return e}},{key:"dispatchImmediateEvent",value:function(t){Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispatchEvent",this).call(this,t)}},{key:"dispatchEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;n instanceof qt||(n=new Nt(t));var r=u(n);if(n.captures||n.bubbles){var o=void 0;o=Array.isArray(e)?[].concat(nt(e)):this.determinePropagationPath(n.target||this),null===n.target?r.target=o.pop():o.pop();var i=[].concat(nt(o));i.reverse(),n.captures&&(r.phase="capture",o.some(function(t){return t.dispatchImmediateEvent(n),n.propagationStopped})),n.propagationStopped||!Number.isInteger(n.target)&&(r.phase="target",n.target.dispatchImmediateEvent(n),n.propagationStopped)||n.bubbles&&(r.phase="bubble",i.some(function(t){return t.dispatchImmediateEvent(n),n.propagationStopped}))}else this.dispatchImmediateEvent(n)}},{key:"ancestorEventTarget",get:function(){return Ht(this).ancestorEventTarget},set:function(t){Ht(this).ancestorEventTarget=t||null}},{key:"descendantEventTarget",get:function(){return Ht(this).descendantEventTarget},set:function(t){Ht(this).descendantEventTarget=t||null}}])}(),function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}$(e,Ut),G(e,[{key:"key",get:function(){return this.originalEvent.key}},{key:"code",get:function(){return this.originalEvent.code}},{key:"ctrlKey",get:function(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function(){return this.originalEvent.shiftKey}},{key:"altKey",get:function(){return this.originalEvent.altKey}},{key:"metaKey",get:function(){return this.originalEvent.metaKey}},{key:"repeat",get:function(){return this.originalEvent.repeat}}])}(),e("MouseEvent")),Zt=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,Ut),G(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=t.y,o=t.movementX,i=t.movementY,a=Lt(t,["x","y","movementX","movementY"]);Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,Ct({},a));var u=Yt(this);return u.x=n||0,u.y=r||0,u.movementX=o||0,u.movementY=i||0,this}},{key:"x",get:function(){return Yt(this).x}},{key:"y",get:function(){return Yt(this).y}},{key:"movementX",get:function(){return Yt(this).movementX}},{key:"movementY",get:function(){return Yt(this).movementY}},{key:"button",get:function(){return this.originalEvent.button}},{key:"ctrlKey",get:function(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function(){return this.originalEvent.shiftKey}},{key:"altKey",get:function(){return this.originalEvent.altKey}},{key:"metaKey",get:function(){return this.originalEvent.metaKey}}]),e}(),Vt=e("Touch"),Jt=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};J(this,t),this.init(e)}G(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,r=t.target,o=t.originalTouch,i=Vt(this);return i.x=e||0,i.y=n||0,i.target=r||null,i.originalTouch=o||null,this}},{key:"x",get:function(){return Vt(this).x}},{key:"y",get:function(){return Vt(this).y}},{key:"target",get:function(){return Vt(this).target}},{key:"originalTouch",get:function(){return Vt(this).originalTouch}},{key:"identifier",get:function(){return this.originalTouch.identifier}}])}(),e("TouchEvent")),Gt=(function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}$(e,Ut),G(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.touches,r=t.changedTouches,o=Lt(t,["touches","changedTouches"]);Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,Ct({},o));var i=Jt(this);return i.touches=n,i.changedTouches=r,this}},{key:"touches",get:function(){return Jt(this).touches}},{key:"changedTouches",get:function(){return Jt(this).changedTouches}},{key:"ctrlKey",get:function(){return this.originalEvent.ctrlKey}},{key:"shiftKey",get:function(){return this.originalEvent.shiftKey}},{key:"altKey",get:function(){return this.originalEvent.altKey}},{key:"metaKey",get:function(){return this.originalEvent.metaKey}}])}(),e("TouchList")),Qt=(function(){function t(){J(this,t),Gt(this).array=[],this.init.apply(this,arguments)}G(t,[{key:"init",value:function(t){var e=Gt(this);if(e.array.length=0,Array.isArray(t)){var n;(n=e.array).push.apply(n,nt(t))}else if(t){for(var r,o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(r=e.array).push.apply(r,[t].concat(i))}}},{key:"item",value:function(t){return Gt(this).array[t]}},{key:"length",get:function(){return Gt(this).array.length}}])}(),function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}$(e,Zt),G(e,[{key:"deltaX",get:function(){return this.originalEvent.deltaX}},{key:"deltaY",get:function(){return this.originalEvent.deltaY}},{key:"deltaZ",get:function(){return this.originalEvent.deltaZ}}])}(),v("AggregateFunction")),$t=function(){function t(e){if(J(this,t),e!==Qt)throw new Error;for(var n=Qt(this),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];n.targets=o}return G(t,[{key:"apply",value:function(t,e,n){return Qt(this).targets.map(function(t){return Reflect.apply(t,e,n)})}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=new(Function.prototype.bind.apply(this,[null].concat([Qt],e)));return new Proxy(function(){},r)}}]),t}(),te=v("Aggregate");!function(){function t(e){if(J(this,t),e!==te)throw new Error;for(var n=te(this),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];n.targets=o}G(t,[{key:"set",value:function(t,e,n,r){return te(this).targets.forEach(function(t){Reflect.set(t,e,n)}),Reflect.set(t,e,n,r)}},{key:"get",value:function(t,e,n){var r=te(this);return r.targets.every(function(t){return"function"==typeof Reflect.get(t,e)})?$t.new.apply($t,nt(r.targets.map(function(t){return Reflect.get(t,e).bind(t)}))):Reflect.get(r.targets[0],e,n)}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=new(Function.prototype.bind.apply(this,[null].concat([te],e)));return new Proxy({},r)}}])}();Object.setPrototypeOf(g,Error),(g.prototype=Object.create(Error.prototype)).name="AssertionError",g.prototype.message="",g.prototype.constructor=g;var ee=function(){function t(){J(this,t)}return G(t,null,[{key:"type",get:function(){try{if(new Function("return this === window")())return"browser"}catch(t){}try{if(new Function("return this === self")())return"worker"}catch(t){}try{if(new Function("return this === global")())return"node"}catch(t){}throw new Error}},{key:"self",get:function(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),t}(),ne=v("FilePath"),re=function(){function t(){J(this,t)}return G(t,null,[{key:"self",get:function(){return ne(this).self}},{key:"current",get:function(){switch(ee.type){case"browser":return window.location.href;case"worker":return self.location.href;case"node":return process.cwd()}throw new Error}}]),t}();ne(re).self=re.current;var oe,ie,ae,ue="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},se=m(function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}};t.exports=n}()}),ce={utf8:{stringToBytes:function(t){return ce.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(ce.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},fe=ce,le=function(t){return null!=t&&(b(t)||w(t)||!!t._isBuffer)},he=(m(function(t){!function(){var e=se,n=fe.utf8,r=le,o=fe.bin,i=function t(i,a){i.constructor==String?i=a&&"binary"===a.encoding?o.stringToBytes(i):n.stringToBytes(i):r(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||(i=i.toString());for(var u=e.bytesToWords(i),s=8*i.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<u.length;p++)u[p]=16711935&(u[p]<<8|u[p]>>>24)|4278255360&(u[p]<<24|u[p]>>>8);u[s>>>5]|=128<<s%32,u[14+(s+64>>>9<<4)]=s;for(var y=t._ff,d=t._gg,v=t._hh,g=t._ii,p=0;p<u.length;p+=16){var m=c,b=f,w=l,k=h;f=g(f=g(f=g(f=g(f=v(f=v(f=v(f=v(f=d(f=d(f=d(f=d(f=y(f=y(f=y(f=y(f,l=y(l,h=y(h,c=y(c,f,l,h,u[p+0],7,-680876936),f,l,u[p+1],12,-389564586),c,f,u[p+2],17,606105819),h,c,u[p+3],22,-1044525330),l=y(l,h=y(h,c=y(c,f,l,h,u[p+4],7,-176418897),f,l,u[p+5],12,1200080426),c,f,u[p+6],17,-1473231341),h,c,u[p+7],22,-45705983),l=y(l,h=y(h,c=y(c,f,l,h,u[p+8],7,1770035416),f,l,u[p+9],12,-1958414417),c,f,u[p+10],17,-42063),h,c,u[p+11],22,-1990404162),l=y(l,h=y(h,c=y(c,f,l,h,u[p+12],7,1804603682),f,l,u[p+13],12,-40341101),c,f,u[p+14],17,-1502002290),h,c,u[p+15],22,1236535329),l=d(l,h=d(h,c=d(c,f,l,h,u[p+1],5,-165796510),f,l,u[p+6],9,-1069501632),c,f,u[p+11],14,643717713),h,c,u[p+0],20,-373897302),l=d(l,h=d(h,c=d(c,f,l,h,u[p+5],5,-701558691),f,l,u[p+10],9,38016083),c,f,u[p+15],14,-660478335),h,c,u[p+4],20,-405537848),l=d(l,h=d(h,c=d(c,f,l,h,u[p+9],5,568446438),f,l,u[p+14],9,-1019803690),c,f,u[p+3],14,-187363961),h,c,u[p+8],20,1163531501),l=d(l,h=d(h,c=d(c,f,l,h,u[p+13],5,-1444681467),f,l,u[p+2],9,-51403784),c,f,u[p+7],14,1735328473),h,c,u[p+12],20,-1926607734),l=v(l,h=v(h,c=v(c,f,l,h,u[p+5],4,-378558),f,l,u[p+8],11,-2022574463),c,f,u[p+11],16,1839030562),h,c,u[p+14],23,-35309556),l=v(l,h=v(h,c=v(c,f,l,h,u[p+1],4,-1530992060),f,l,u[p+4],11,1272893353),c,f,u[p+7],16,-155497632),h,c,u[p+10],23,-1094730640),l=v(l,h=v(h,c=v(c,f,l,h,u[p+13],4,681279174),f,l,u[p+0],11,-358537222),c,f,u[p+3],16,-722521979),h,c,u[p+6],23,76029189),l=v(l,h=v(h,c=v(c,f,l,h,u[p+9],4,-640364487),f,l,u[p+12],11,-421815835),c,f,u[p+15],16,530742520),h,c,u[p+2],23,-995338651),l=g(l,h=g(h,c=g(c,f,l,h,u[p+0],6,-198630844),f,l,u[p+7],10,1126891415),c,f,u[p+14],15,-1416354905),h,c,u[p+5],21,-57434055),l=g(l,h=g(h,c=g(c,f,l,h,u[p+12],6,1700485571),f,l,u[p+3],10,-1894986606),c,f,u[p+10],15,-1051523),h,c,u[p+1],21,-2054922799),l=g(l,h=g(h,c=g(c,f,l,h,u[p+8],6,1873313359),f,l,u[p+15],10,-30611744),c,f,u[p+6],15,-1560198380),h,c,u[p+13],21,1309151649),l=g(l,h=g(h,c=g(c,f,l,h,u[p+4],6,-145523070),f,l,u[p+11],10,-1120210379),c,f,u[p+2],15,718787259),h,c,u[p+9],21,-343485551),c=c+m>>>0,f=f+b>>>0,l=l+w>>>0,h=h+k>>>0}return e.endian([c,f,l,h])};i._ff=function(t,e,n,r,o,i,a){var u=t+(e&n|~e&r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._gg=function(t,e,n,r,o,i,a){var u=t+(e&r|n&~r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._hh=function(t,e,n,r,o,i,a){var u=t+(e^n^r)+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._ii=function(t,e,n,r,o,i,a){var u=t+(n^(e|~r))+(o>>>0)+a;return(u<<i|u>>>32-i)+e},i._blocksize=16,i._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(i(t,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):e.bytesToHex(r)}}()}),{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"}),pe=function(t){throw{name:"SyntaxError",message:t,at:oe,text:void 0}},ye=function(t){return t&&t!==ie&&pe("Expected '"+t+"' instead of '"+ie+"'"),ie=(void 0).charAt(oe),oe+=1,ie},de=function(){var t,e="";for("-"===ie&&(e="-",ye("-"));ie>="0"&&ie<="9";)e+=ie,ye();if("."===ie)for(e+=".";ye()&&ie>="0"&&ie<="9";)e+=ie;if("e"===ie||"E"===ie)for(e+=ie,ye(),"-"!==ie&&"+"!==ie||(e+=ie,ye());ie>="0"&&ie<="9";)e+=ie,ye();if(t=+e,isFinite(t))return t;pe("Bad number")},ve=function(){var t,e,n,r="";if('"'===ie)for(;ye();){if('"'===ie)return ye(),r;if("\\"===ie)if(ye(),"u"===ie){for(n=0,e=0;e<4&&(t=parseInt(ye(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof he[ie])break;r+=he[ie]}else r+=ie}pe("Bad string")},ge=function(){for(;ie&&ie<=" ";)ye()},me=function(){switch(ie){case"t":return ye("t"),ye("r"),ye("u"),ye("e"),!0;case"f":return ye("f"),ye("a"),ye("l"),ye("s"),ye("e"),!1;case"n":return ye("n"),ye("u"),ye("l"),ye("l"),null}pe("Unexpected '"+ie+"'")},be=function(){var t=[];if("["===ie){if(ye("["),ge(),"]"===ie)return ye("]"),t;for(;ie;){if(t.push(ae()),ge(),"]"===ie)return ye("]"),t;ye(","),ge()}}pe("Bad array")},we=function(){var t,e={};if("{"===ie){if(ye("{"),ge(),"}"===ie)return ye("}"),e;for(;ie;){if(t=ve(),ge(),ye(":"),Object.hasOwnProperty.call(e,t)&&pe('Duplicate key "'+t+'"'),e[t]=ae(),ge(),"}"===ie)return ye("}"),e;ye(","),ge()}}pe("Bad object")};ae=function(){switch(ge(),ie){case"{":return we();case"[":return be();case'"':return ve();case"-":return de();default:return ie>="0"&&ie<="9"?de():me()}},Object.setPrototypeOf(k,Error),(k.prototype=Object.create(Error.prototype)).name="ImplementationError",k.prototype.message="",k.prototype.constructor=k;var ke=v("Multiton"),Ee=(function(){function t(e){if(J(this,t),this.constructor.has(e))throw new Error('Attempt to create multiple instances for key "'+e+'"')}G(t,null,[{key:"has",value:function(t){var e=ke(this);if(void 0===e.instances)return!1;var n=this.coerceMultitonKey(t);return void 0!==e.instances[n]}},{key:"for",value:function(t){var e=ke(this);e.instances||(e.instances=new Map);var n=this.coerceMultitonKey(t);if(e.instances.has(n))return e.instances.get(n);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=new(Function.prototype.bind.apply(this,[null].concat([n],o)));return e.instances.set(n,a),a}},{key:"coerceMultitonKey",value:function(t){return t}}])}(),function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}),_e=Object.prototype.hasOwnProperty,Oe={stringify:function(t,e){var n=[];"string"!=typeof(e=e||"")&&(e="?");for(var r in t)_e.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""},parse:function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);r[E(e[1])]=E(e[2]));return r}},Ae=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,je=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Te=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],xe={hash:1,query:1};j.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||Oe.parse)(e)),r[t]=e;break;case"port":r[t]=e,Ee(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,/:\d+$/.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":r.pathname=e.length&&"/"!==e.charAt(0)?"/"+e:e;break;default:r[t]=e}for(var o=0;o<Te.length;o++){var i=Te[o];i[4]&&(r[i[1]]=r[i[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=Oe.stringify);var e,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(e="object"===V(n.query)?t(n.query):n.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(o+=n.hash),o}},j.extractProtocol=O,j.location=_,j.qs=Oe;var Pe=j,Se=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,Pe),e}(),Be=void 0,qe=void 0;if("node"===ee.type){var Ce=require("fs");Be=Ce.readFile,qe=require("request")}!function(){function t(){J(this,t)}G(t,null,[{key:"text",value:function(){var t=S.apply(void 0,arguments),e=et(t,2),n=e[0],r=e[1];return r.type="text",P(n,r)}},{key:"json",value:function(){var t=S.apply(void 0,arguments),e=et(t,2),n=e[0],r=e[1];return r.type="json",P(n,r)}},{key:"buffer",value:function(){var t=S.apply(void 0,arguments),e=et(t,2),n=e[0],r=e[1];return r.type="arraybuffer",r.encoding=null,P(n,r)}},{key:"csv",value:function(){var t=S.apply(void 0,arguments),e=et(t,2),n=e[0],r=e[1];return this.text(n,r).then(function(t){return ee.self.d3.csvParse(t,r.row)})}},{key:"tsv",value:function(){var t=S.apply(void 0,arguments),e=et(t,2),n=e[0],r=e[1];return this.text(n,r).then(function(t){return ee.self.d3.tsvParse(t,r.row)})}}])}();var Le=v("Semaphore"),ze=function t(e,n){var r=this;J(this,t);var o=[new Promise(function(t,e){r.resolve=t,r.reject=e}),new Promise(function(t){r.let=t}).then(function(){n(r.resolve,r.reject)})];this.promise=Promise.all(o).then(function(t){return e.signal(),t[0]},function(t){return e.signal(),Promise.reject(t)})},Ke=(function(){function t(e){J(this,t);var n=Le(this);n.capacity=e,n.available=e,n.queue=[]}G(t,[{key:"wait",value:function(t){var e=Le(this),n=new ze(this,t);return 0===e.available?e.queue.push(n):(--e.available,n.let()),n.promise}},{key:"signal",value:function(){var t=Le(this);0===t.queue.length?++t.available:t.queue.shift().let()}},{key:"capacity",get:function(){return Le(this).capacity}},{key:"available",get:function(){return Le(this).available}}])}(),v("Singleton")),Me=(function(){function t(){if(J(this,t),void 0!==Ke(this.constructor).instance)throw new Error("Attempt to create multiple instances for singleton")}G(t,null,[{key:"get",value:function(){var t=Ke(this);if(void 0===t.instance){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.instance=new(Function.prototype.bind.apply(this,[null].concat(n)))}return t.instance}}])}(),function(){function t(){J(this,t)}G(t,null,[{key:"transform",value:function(t,e,n){var r=[];return t.forEach(function(o,i){var a=i%e;if(r[a]=o,a===e-1)for(var u=n.apply(void 0,r.concat([Math.floor(i/e)])),s=0;s<e;++s)t[i-(e-s-1)]=u[s]}),t}},{key:"forEach",value:function(t,e,n){var r=[];t.forEach(function(t,o){var i=o%e;r[i]=t,i===e-1&&n.apply(void 0,r.concat([Math.floor(o/e)]))})}},{key:"some",value:function(t,e,n){var r=[];return t.some(function(t,o){var i=o%e;return r[i]=t,i===e-1&&n.apply(void 0,r.concat([Math.floor(o/e)]))})}},{key:"every",value:function(t,e,n){var r=[];return t.every(function(t,o){var i=o%e;return r[i]=t,i!==e-1||n.apply(void 0,r.concat([Math.floor(o/e)]))})}},{key:"reduce",value:function(t,e,n,r){var o=[];return t.reduce(function(t,r,i){var a=i%e;return o[a]=r,a===e-1?n.apply(void 0,[t].concat(o,[Math.floor(i/e)])):t},r)}}])}(),m(function(t,e){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,a,u=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--);var f=new ArrayBuffer(u),l=new Uint8Array(f);for(e=0;e<s;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],a=n[t.charCodeAt(e+3)],l[c++]=r<<2|o>>4,l[c++]=(15&o)<<4|i>>2,l[c++]=(3&i)<<6|63&a;return f}}()}));if("node"===ee.type){var Ie=require("text-encoding");void 0===ee.self.TextEncoder&&(ee.self.TextEncoder=Ie.TextEncoder),void 0===ee.self.TextDecoder&&(ee.self.TextDecoder=Ie.TextDecoder)}!function(){function t(){J(this,t)}G(t,null,[{key:"encode",value:function(t){if("function"!=typeof TextEncoder)throw new Error("TextEncoder is missing");var e=new TextEncoder,n=JSON.stringify(t);return e.encode(n).buffer}},{key:"decode",value:function(t){if("function"!=typeof TextDecoder)throw new Error("TextDecoder is missing");var e=new TextDecoder,n=new DataView(t),r=e.decode(n);return JSON.parse(r)}},{key:"pack",value:function(t){return Me.encode(t)}},{key:"unpack",value:function(t){return Me.decode(t)}},{key:"packBufferGeometry",value:function(t){var e=this;Object.values(t.data.attributes).forEach(function(t){var n=new(0,ee.self[t.type])(t.array).buffer;t.array=e.pack(n)})}},{key:"unpackBufferGeometry",value:function(t){var e=this;Object.values(t.data.attributes).forEach(function(t){var n=ee.self[t.type],r=e.unpack(t.array);t.array=Array.from(new n(r))})}}])}();var Re,Fe=ue.crypto||ue.msCrypto;if(Fe&&Fe.getRandomValues){var De=new Uint8Array(16);Re=function(){return Fe.getRandomValues(De),De}}if(!Re){var Ue=new Array(16);Re=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),Ue[e]=t>>>((3&e)<<3)&255;return Ue}}for(var Ne=Re,Xe=[],We=0;We<256;++We)Xe[We]=(We+256).toString(16).substr(1);var He=Ne(),Ye=(He[0],He[1],He[2],He[3],He[4],He[5],He[6],He[7],v("DataLoader")),Ze=function(t){function e(t){J(this,e);var n=tt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=Ye(n);return r.request=null,void 0!==t?(r.url=t.url||t,r.size=t.size||0):(r.url=null,r.size=0),r.progress=0,r.determinate=!1,r.completed=!1,r.failed=!1,n}return $(e,Wt),G(e,[{key:"load",value:function(){var t=this,e=Ye(this);return void 0!==e.promise?e.promise:null===this.url?Promise.reject():(e.promise=new Promise(function(n,r){var o=new XMLHttpRequest;e.handlers={init:B.bind(t),progress:q.bind(t),loadend:C.bind(t)},o.addEventListener("progress",e.handlers.init,!1),o.addEventListener("progress",e.handlers.progress,!1),o.addEventListener("loadend",e.handlers.loadend,!1),o.open("get",t.url),o.send(),e.request=o,e.resolve=n,e.reject=r}),e.promise)}},{key:"abort",value:function(){var t=Ye(this);void 0!==t.promise&&t.request.abort()}},{key:"request",get:function(){return Ye(this).request}},{key:"url",get:function(){return Ye(this).url}},{key:"size",get:function(){return Ye(this).size}},{key:"progress",get:function(){return Ye(this).progress}},{key:"determinate",get:function(){return Ye(this).determinate}},{key:"completed",get:function(){return Ye(this).completed}},{key:"failed",get:function(){return Ye(this).failed}}]),e}(),Ve=v("ScriptLoader"),Je=function(t){function e(){return J(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return $(e,Ze),G(e,[{key:"load",value:function(){var t=this,n=Ve(this);return void 0!==n.promise?n.promise:(n.promise=new Promise(function(n,r){Q(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",t).call(t).then(function(e){var o=document.createElement("script");o.type="text/javascript",o.src=t.url,o.onload=function(){n(e)},o.onerror=function(){r(e.status)};var i=document.getElementsByTagName("script"),a=i[i.length-1];a.parentNode.insertBefore(o,a)})}),n.promise)}}]),e}(),Ge=v("Loader"),Qe=function(t){function e(){J(this,e);var t=tt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=Ge(t);n.determinate=!1,n.completed=!1,n.failed=!1,n.handlers={size:D.bind(t),progress:U.bind(t),determinate:N.bind(t),completed:X.bind(t),failed:W.bind(t)};for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n.sequence=R(o),n.loaders=F(n.sequence),n.loaders.forEach(function(t){t.addEventListener("size",n.handlers.size,!1),t.addEventListener("progress",n.handlers.progress,!1),t.addEventListener("determinate",n.handlers.determinate,!1),t.addEventListener("completed",n.handlers.completed,!1),t.addEventListener("failed",n.handlers.failed,!1)}),t}return $(e,Wt),G(e,[{key:"load",value:function(){var t=Ge(this);return void 0!==t.promise?t.promise:0===this.loaders.length?Promise.reject():(t.promise=this.constructor.loadSequentially(t.sequence),t.promise)}},{key:"abort",value:function(){var t=Ge(this);void 0!==t.promise&&t.loaders.forEach(function(t){t.abort()})}},{key:"loaders",get:function(){var t=Ge(this);return[].concat(nt(t.loaders))}},{key:"size",get:function(){return Ge(this).loaders.reduce(function(t,e){return t+e.size},0)}},{key:"progress",get:function(){var t=Ge(this);if(0===this.size)return Math.min(1,t.loaders.reduce(function(e,n){return e+n.progress/t.loaders.length},0));var e=t.loaders.filter(function(t){return 0!==t.size}),n=e.reduce(function(t,e){return t+e.size},0)/e.length,r=n*t.loaders.length;return Math.min(1,t.loaders.reduce(function(t,e){return t+e.progress*(e.size||n)/r},0))}},{key:"determinate",get:function(){return Ge(this).determinate}},{key:"completed",get:function(){return Ge(this).completed}},{key:"failed",get:function(){return Ge(this).failed}}],[{key:"loadParallelly",value:function(t){var e=this;return Promise.all(t.map(function(t){return Array.isArray(t)?e.loadSequentially(t):t.load().then(function(t){return[].concat(t)})})).then(function(t){var e;return(e=[]).concat.apply(e,nt(t))})}},{key:"loadSequentially",value:function(t){var e=this;return 0===t.length?Promise.resolve([]):t.reduce(function(t,n){return null===t?Array.isArray(n)?e.loadParallelly(n):n.load().then(function(t){return[].concat(t)}):Array.isArray(n)?t.then(function(t){return e.loadParallelly(n).then(function(e){return[].concat(t,e)})}):t.then(function(t){return n.load().then(function(e){return[].concat(t,e)})})},null)}}]),e}();t.DataLoader=Ze,t.Loader=Qe,t.ScriptLoader=Je,Object.defineProperty(t,"__esModule",{value:!0})});